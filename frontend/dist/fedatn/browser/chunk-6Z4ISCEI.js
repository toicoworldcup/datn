import{a as E}from"./chunk-LFOHVDS3.js";import{a as he,b as fe,c as z,d as X,e as Re,f as F,g as K,h as Ce}from"./chunk-YVL5JX4W.js";import{$ as y,A as G,D as P,E as h,F as m,G as ze,H as a,I as p,J as V,K as se,L as Fe,M as b,N as M,O as x,P as ce,Q as Ne,R as H,T as W,U as we,W as Be,X as T,Y as S,Z as ue,a as ye,b as Ee,c as U,d as Te,da as Ve,e as R,ea as He,f as me,g as De,ga as We,h as Ie,ha as Ke,i as pe,ia as je,j as Ae,ja as $,l as C,la as q,m as _,ma as w,o as s,p as u,pa as k,q as v,r as ge,ra as Ge,sa as D,ta as I,u as g,ua as A,w as d,wa as L,y as r,z as i}from"./chunk-OILZWOMK.js";var Y=class o{constructor(t){this.http=t}apiUrl="http://localhost:8080/attendance";getAllAttendances(){return this.http.get(this.apiUrl)}getAttendanceByClazzAndStudentAndSemester(t,e,n,c){return this.http.get(`${this.apiUrl}/clazz/${t}/student/${e}/semester/${n}/${c}`)}markAttendance(t){return this.http.post(this.apiUrl,t)}markBulkAttendance1(t){return this.http.post(this.apiUrl,t)}markBulkAttendance(t){return this.http.post(`${this.apiUrl}/bulk`,t,{responseType:"text"})}getAttendanceByClazzAndSemesterAndDate(t,e,n){return this.http.get(`${this.apiUrl}/clazz/${t}/semester/${e}/date/${n}`)}getAbsentCount(t,e,n){return this.http.get(`${this.apiUrl}/absent-count/${e}/clazz/${t}/to-date/${n}`)}getAttendanceDatesByClazzAndSemester(t,e){let n=`${this.apiUrl}/clazz/${t}/semester/${e}/dates`;return this.http.get(n)}checkAttendanceExists(t,e,n){let c=`${this.apiUrl}/check-exists/${t}/${e}/${n}`;return this.http.get(c)}static \u0275fac=function(e){return new(e||o)(Ae(Ve))};static \u0275prov=Ie({token:o,factory:o.\u0275fac,providedIn:"root"})};function Je(o,t){if(o&1&&(r(0,"option",12),a(1),i()),o&2){let e=t.$implicit;d("value",e.name),s(),p(e.name)}}function Ze(o,t){if(o&1&&(r(0,"option",12),a(1),i()),o&2){let e=t.$implicit;d("value",e),s(),p(e)}}function et(o,t){o&1&&G(0,"span",16)}function tt(o,t){if(o&1){let e=P();r(0,"div",1)(1,"button",13),h("click",function(){C(e);let c=m();return _(c.taoDiemDanhNhanh())}),g(2,et,1,0,"span",14),a(3," T\u1EA1o m\u1EDBi "),i(),r(4,"button",15),h("click",function(){C(e);let c=m();return c.showDetailedAttendance=!0,_(c.showQuickAttendance=!1)}),a(5," Xem \u0111i\u1EC3m danh "),i()()}if(o&2){let e=m();s(),d("disabled",e.loading),s(),d("ngIf",e.loading)}}function nt(o,t){if(o&1){let e=P();r(0,"tr")(1,"td"),a(2),i(),r(3,"td"),a(4),i(),r(5,"td")(6,"select",21),x("ngModelChange",function(c){let l=C(e).$implicit,f=m(2);return M(f.quickAttendanceStatus[l.student.mssv],c)||(f.quickAttendanceStatus[l.student.mssv]=c),_(c)}),r(7,"option",22),a(8,"\u0110\u1EE7"),i(),r(9,"option",23),a(10,"V\u1EAFng"),i()()()()}if(o&2){let e=t.$implicit,n=m(2);s(2),p(e.student.mssv),s(2),p(e.student.name),s(2),b("ngModel",n.quickAttendanceStatus[e.student.mssv])}}function ot(o,t){o&1&&G(0,"span",16)}function it(o,t){if(o&1){let e=P();r(0,"div",17)(1,"h3"),a(2),H(3,"date"),i(),r(4,"table",18)(5,"thead")(6,"tr")(7,"th"),a(8,"MSSV"),i(),r(9,"th"),a(10,"T\xEAn h\u1ECDc sinh"),i(),r(11,"th"),a(12,"Tr\u1EA1ng th\xE1i"),i()()(),r(13,"tbody"),g(14,nt,11,3,"tr",19),i()(),r(15,"button",20),h("click",function(){C(e);let c=m();return _(c.saveQuickAttendance())}),g(16,ot,1,0,"span",14),a(17," L\u01B0u \u0111i\u1EC3m danh "),i()()}if(o&2){let e=m();s(2),se("\u0110i\u1EC3m danh ng\xE0y ",W(3,5,e.today,"yyyy-MM-dd")," - L\u1EDBp ",e.selectedMaLop,""),s(12),d("ngForOf",e.studentsForQuickAttendance),s(),d("disabled",e.loading),s(),d("ngIf",e.loading)}}function rt(o,t){if(o&1&&(r(0,"th"),a(1),i()),o&2){let e=t.$implicit,n=m(2);s(),p(n.formatDate(e))}}function at(o,t){if(o&1&&(r(0,"td")(1,"span"),a(2),i()()),o&2){let e=t.$implicit,n=m().$implicit,c=m(2);s(2),V(" ",n.attendanceStatus[c.formatDate(e)]==="DU"?"\u0110\u1EE7":n.attendanceStatus[c.formatDate(e)]==="VANG"?"V\u1EAFng":""," ")}}function st(o,t){if(o&1&&(r(0,"tr")(1,"td"),a(2),i(),g(3,at,3,1,"td",19),r(4,"td"),a(5),i()()),o&2){let e=t.$implicit,n=m(2);s(2),p(e.student.name),s(),d("ngForOf",n.detailedAttendanceColumns),s(2),p(e.student.absentCount!==-1?e.student.absentCount:"\u0110ang t\u1EA3i...")}}function ct(o,t){if(o&1&&(r(0,"div",17)(1,"h3"),a(2),i(),r(3,"div",24)(4,"table",18)(5,"thead")(6,"tr")(7,"th"),a(8,"H\u1ECDc sinh"),i(),g(9,rt,2,1,"th",19),r(10,"th"),a(11,"S\u1ED1 Bu\u1ED5i V\u1EAFng"),i()()(),r(12,"tbody"),g(13,st,6,3,"tr",19),i()()()()),o&2){let e=m();s(2),se("\u0110i\u1EC3m danh chi ti\u1EBFt - L\u1EDBp ",e.selectedMaLop," - H\u1ECDc k\u1EF3 ",e.selectedHocKi,""),s(7),d("ngForOf",e.detailedAttendanceColumns),s(4),d("ngForOf",e.studentsWithAttendance)}}function lt(o,t){o&1&&(r(0,"div",25),a(1," \u0110ang t\u1EA3i d\u1EEF li\u1EC7u... "),r(2,"div",26)(3,"span",27),a(4,"Loading..."),i()()())}function dt(o,t){if(o&1&&(r(0,"div",28),a(1),i()),o&2){let e=m();s(),p(e.error)}}var J=class o{constructor(t,e,n,c){this.semesterService=t;this.teacherService=e;this.studentService=n;this.attendanceService=c}selectedHocKi="";selectedMaLop="";semesters=[];maLops=[];studentsWithAttendance=[];studentsForQuickAttendance=[];loading=!1;error="";detailedAttendanceColumns=[];showQuickAttendance=!1;showDetailedAttendance=!1;quickAttendanceStatus={};today=new Date;ngOnInit(){this.loadSemesters()}loadSemesters(){this.semesterService.getAllSemesters().subscribe({next:t=>{this.semesters=t},error:t=>{console.error("L\u1ED7i khi t\u1EA3i h\u1ECDc k\u1EF3",t),this.error="L\u1ED7i khi t\u1EA3i h\u1ECDc k\u1EF3."}})}loadClazzesBySemester(){this.selectedHocKi?(this.loading=!0,this.maLops=[],this.teacherService.getTeacherClassesBySemester(this.selectedHocKi).subscribe({next:t=>{this.maLops=t.map(e=>e.maLop),this.loading=!1,this.studentsWithAttendance=[],this.studentsForQuickAttendance=[],this.detailedAttendanceColumns=[],this.showQuickAttendance=!1,this.showDetailedAttendance=!1,this.selectedMaLop&&this.loadStudentsForBothViews()},error:t=>{console.error("L\u1ED7i khi t\u1EA3i danh s\xE1ch l\u1EDBp",t),this.error="L\u1ED7i khi t\u1EA3i danh s\xE1ch l\u1EDBp.",this.loading=!1}})):(this.maLops=[],this.studentsWithAttendance=[],this.studentsForQuickAttendance=[],this.detailedAttendanceColumns=[],this.showQuickAttendance=!1,this.showDetailedAttendance=!1)}loadStudentsForBothViews(){this.selectedMaLop&&this.selectedHocKi?(this.loading=!0,this.studentsWithAttendance=[],this.studentsForQuickAttendance=[],this.studentService.getStudentsByClazzAndSemester(this.selectedMaLop,this.selectedHocKi).subscribe({next:t=>{let e=new Date,n=this.formatDate(e),c=t.map(l=>this.attendanceService.getAbsentCount(this.selectedMaLop,l.mssv,n));R(c).subscribe({next:l=>{this.studentsWithAttendance=t.map((f,O)=>({student:Ee(ye({},f),{absentCount:l[O]}),attendanceStatus:{}})),this.studentsForQuickAttendance=t.map(f=>({student:f,attendanceStatus:{[n]:null}})),this.loadDetailedAttendanceData(),this.loading=!1},error:l=>{console.error("L\u1ED7i khi t\u1EA3i s\u1ED1 bu\u1ED5i v\u1EAFng",l),this.studentsWithAttendance=t.map(f=>({student:Ee(ye({},f),{absentCount:-1}),attendanceStatus:{}})),this.studentsForQuickAttendance=t.map(f=>({student:f,attendanceStatus:{[n]:null}})),this.loading=!1,this.error="L\u1ED7i khi t\u1EA3i s\u1ED1 bu\u1ED5i v\u1EAFng.",this.loadDetailedAttendanceData()}})},error:t=>{console.error("L\u1ED7i khi t\u1EA3i danh s\xE1ch sinh vi\xEAn",t),this.error="L\u1ED7i khi t\u1EA3i danh s\xE1ch sinh vi\xEAn.",this.loading=!1}})):(this.studentsWithAttendance=[],this.studentsForQuickAttendance=[],this.detailedAttendanceColumns=[])}loadDetailedAttendanceData(){this.selectedMaLop&&this.selectedHocKi&&this.studentsWithAttendance.length>0?(this.loading=!0,this.attendanceService.getAttendanceDatesByClazzAndSemester(this.selectedMaLop,this.selectedHocKi).subscribe({next:t=>{this.detailedAttendanceColumns=t.map(n=>new Date(n)),this.detailedAttendanceColumns.sort((n,c)=>n.getTime()-c.getTime());let e=this.studentsWithAttendance.flatMap(n=>this.detailedAttendanceColumns.map(c=>{let l=this.formatDate(c);return this.attendanceService.getAttendanceByClazzAndStudentAndSemester(this.selectedMaLop,n.student.mssv,this.selectedHocKi,l).pipe(me(()=>U([])),Te(f=>{let O=f.find(B=>this.formatDate(new Date(B.attendanceDate))===l);return{mssv:n.student.mssv,date:l,status:O?O.status:null}}))}));R(e).subscribe({next:n=>{this.studentsWithAttendance.forEach(c=>{this.detailedAttendanceColumns.forEach(l=>{let f=this.formatDate(l),O=n.find(B=>B?.mssv===c.student.mssv&&B?.date===f);c.attendanceStatus||(c.attendanceStatus={}),c.attendanceStatus[f]=O?.status||null})}),this.loading=!1},error:n=>{console.error("L\u1ED7i khi t\u1EA3i d\u1EEF li\u1EC7u \u0111i\u1EC3m danh chi ti\u1EBFt",n),this.loading=!1}})},error:t=>{console.error("L\u1ED7i khi t\u1EA3i ng\xE0y \u0111i\u1EC3m danh",t),this.loading=!1}})):(this.loading=!1,this.detailedAttendanceColumns=[])}kiemTraDiemDanhDaTonTai(){let t=this.formatDate(this.today);return this.attendanceService.checkAttendanceExists(this.selectedMaLop,this.selectedHocKi,t)}taoDiemDanhNhanh(){this.kiemTraDiemDanhDaTonTai().pipe(De(t=>t?(alert("\u0110i\u1EC3m danh cho l\u1EDBp n\xE0y v\xE0o ng\xE0y h\xF4m nay \u0111\xE3 t\u1ED3n t\u1EA1i."),U(null)):(this.showQuickAttendance=!0,U(null)))).subscribe()}saveQuickAttendance(){if(this.selectedMaLop&&this.selectedHocKi){this.loading=!0;let t=[],e=this.formatDate(this.today);this.studentsForQuickAttendance.forEach(n=>{let c=this.quickAttendanceStatus[n.student.mssv];c&&t.push({maLop:this.selectedMaLop,hocKi:this.selectedHocKi,mssv:n.student.mssv,attendanceDate:e,status:c})}),this.attendanceService.markBulkAttendance(t).subscribe({next:n=>{console.log("L\u01B0u \u0111i\u1EC3m danh nhanh th\xE0nh c\xF4ng",n),this.loading=!1,alert("L\u01B0u \u0111i\u1EC3m danh nhanh th\xE0nh c\xF4ng!"),this.loadStudentsForBothViews(),this.showQuickAttendance=!1},error:n=>{console.error("L\u1ED7i khi l\u01B0u \u0111i\u1EC3m danh nhanh",n),this.loading=!1,n.status===400?alert(n.error):(this.error="L\u1ED7i khi l\u01B0u \u0111i\u1EC3m danh nhanh.",alert(this.error))}})}else alert("Vui l\xF2ng ch\u1ECDn h\u1ECDc k\u1EF3 v\xE0 l\u1EDBp.")}formatDate(t){if(t instanceof Date){let e=t.getFullYear(),n=("0"+(t.getMonth()+1)).slice(-2),c=("0"+t.getDate()).slice(-2);return`${e}-${n}-${c}`}return""}static \u0275fac=function(e){return new(e||o)(u(F),u(E),u(X),u(Y))};static \u0275cmp=v({type:o,selectors:[["app-student-list"]],decls:22,vars:9,consts:[[1,"container","mt-4"],[1,"mb-3"],["for","hocKi",1,"form-label"],["id","hocKi",1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","maLop",1,"form-label"],["id","maLop",1,"form-select",3,"ngModelChange","change","ngModel"],["class","mb-3",4,"ngIf"],["class","mt-4",4,"ngIf"],["class","mt-3",4,"ngIf"],["class","alert alert-danger mt-3",4,"ngIf"],[3,"value"],[1,"btn","btn-primary","mr-2",3,"click","disabled"],["class","spinner-border spinner-border-sm mr-2",4,"ngIf"],[1,"btn","btn-info",3,"click"],[1,"spinner-border","spinner-border-sm","mr-2"],[1,"mt-4"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],[1,"btn","btn-success",3,"click","disabled"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],["value","DU"],["value","VANG"],[1,"table-responsive"],[1,"mt-3"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"alert","alert-danger","mt-3"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"h2"),a(2,"Qu\u1EA3n l\xFD \u0110i\u1EC3m Danh"),i(),r(3,"div",1)(4,"label",2),a(5,"Ch\u1ECDn H\u1ECDc K\u1EF3:"),i(),r(6,"select",3),x("ngModelChange",function(l){return M(n.selectedHocKi,l)||(n.selectedHocKi=l),l}),h("change",function(){return n.loadClazzesBySemester()}),r(7,"option",4),a(8,"-- Ch\u1ECDn h\u1ECDc k\u1EF3 --"),i(),g(9,Je,2,2,"option",5),i()(),r(10,"div",1)(11,"label",6),a(12,"Ch\u1ECDn M\xE3 L\u1EDBp:"),i(),r(13,"select",7),x("ngModelChange",function(l){return M(n.selectedMaLop,l)||(n.selectedMaLop=l),l}),h("change",function(){return n.loadStudentsForBothViews()}),r(14,"option",4),a(15,"-- Ch\u1ECDn l\u1EDBp --"),i(),g(16,Ze,2,2,"option",5),i()(),g(17,tt,6,2,"div",8)(18,it,18,8,"div",9)(19,ct,14,4,"div",9)(20,lt,5,0,"div",10)(21,dt,2,1,"div",11),i()),e&2&&(s(6),b("ngModel",n.selectedHocKi),s(3),d("ngForOf",n.semesters),s(4),b("ngModel",n.selectedMaLop),s(3),d("ngForOf",n.maLops),s(),d("ngIf",n.selectedMaLop&&n.selectedHocKi),s(),d("ngIf",n.showQuickAttendance&&n.selectedMaLop&&n.selectedHocKi&&n.studentsForQuickAttendance.length>0),s(),d("ngIf",n.showDetailedAttendance&&n.selectedMaLop&&n.selectedHocKi&&n.studentsWithAttendance.length>0),s(),d("ngIf",n.loading),s(),d("ngIf",n.error))},dependencies:[y,T,S,ue,z,L,I,A,D,w,k],styles:[".container[_ngcontent-%COMP%]{padding:20px}.custom-content-container[_ngcontent-%COMP%]{background-color:#ededea;padding:25px;border-radius:10px;box-shadow:0 0 10px #0000000d;margin-top:20px}h2[_ngcontent-%COMP%]{font-size:2.5rem;background:linear-gradient(135deg,#a8d0e6,#b0e0e6);color:#2c3e50;font-weight:700;text-transform:uppercase;border-radius:15px;padding:15px 25px;display:inline-block;box-shadow:0 4px 10px #0000001a;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;letter-spacing:1px;text-align:center;transition:transform .3s ease;margin-bottom:20px}h2[_ngcontent-%COMP%]:hover{transform:scale(1.05)}h3[_ngcontent-%COMP%]{color:#2c3e50;margin-top:20px;margin-bottom:15px}.table-responsive[_ngcontent-%COMP%]{overflow-x:auto}.table[_ngcontent-%COMP%]{table-layout:auto;width:100%;border-collapse:collapse;margin-top:20px;border-radius:8px;overflow:hidden}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px;text-align:left;border:1px solid #ddd;white-space:nowrap;word-wrap:break-word;color:#000;background-color:#32c6dc}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;text-align:center;border:1px solid #ddd;white-space:nowrap;color:#000}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child, .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{text-align:left}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.form-select[_ngcontent-%COMP%]{border-radius:8px}.form-select-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem;line-height:1.5;border-radius:.2rem;max-width:120px}.btn[_ngcontent-%COMP%]{border-radius:8px;padding:8px 15px;cursor:pointer;transition:opacity .3s ease}.btn-primary[_ngcontent-%COMP%]{color:#fff;background-color:#007bff;border-color:#007bff;margin-right:10px}.btn-info[_ngcontent-%COMP%]{color:#fff;background-color:#17a2b8;border-color:#17a2b8;margin-right:10px}.btn-success[_ngcontent-%COMP%]{color:#fff;background-color:#28a745;border-color:#28a745}.btn[_ngcontent-%COMP%]:hover{opacity:.8}.spinner-border[_ngcontent-%COMP%]{margin-right:.5em}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;text-align:center}.mb-3[_ngcontent-%COMP%]{margin-bottom:1.5rem}"]})};function mt(o,t){if(o&1&&(r(0,"option",10),a(1),i()),o&2){let e=t.$implicit;d("value",e==null?null:e.name),s(),p(e==null?null:e.name)}}function pt(o,t){if(o&1&&(r(0,"option",10),a(1),i()),o&2){let e=t.$implicit;d("value",e),s(),p(e)}}function gt(o,t){if(o&1){let e=P();r(0,"div",0)(1,"label",11),a(2,"Ch\u1ECDn M\xE3 L\u1EDBp:"),i(),r(3,"select",12),x("ngModelChange",function(c){C(e);let l=m();return M(l.selectedMaLop,c)||(l.selectedMaLop=c),_(c)}),r(4,"option",3),a(5,"-- Ch\u1ECDn M\xE3 L\u1EDBp --"),i(),g(6,pt,2,2,"option",4),i()()}if(o&2){let e=m();s(3),b("ngModel",e.selectedMaLop),s(3),d("ngForOf",e.maLops)}}function ut(o,t){if(o&1){let e=P();r(0,"div",0)(1,"label",13),a(2,"Ch\u1ECDn Ng\xE0y Xem:"),i(),r(3,"input",14),x("ngModelChange",function(c){C(e);let l=m();return M(l.viewAttendanceDate,c)||(l.viewAttendanceDate=c),_(c)}),i()()}if(o&2){let e=m();s(3),b("ngModel",e.viewAttendanceDate)}}function ht(o,t){if(o&1){let e=P();r(0,"button",15),h("click",function(){C(e);let c=m();return _(c.viewAttendanceList())}),a(1," Xem Danh S\xE1ch "),i()}if(o&2){let e=m();d("disabled",e.loading||!e.viewAttendanceDate)}}function ft(o,t){o&1&&(r(0,"div",16),a(1,"\u0110ang t\u1EA3i d\u1EEF li\u1EC7u..."),i())}function Ct(o,t){if(o&1&&(r(0,"div",17),a(1),i()),o&2){let e=m();s(),p(e.error)}}function _t(o,t){if(o&1&&(r(0,"tr")(1,"td"),a(2),i(),r(3,"td"),a(4),i(),r(5,"td"),a(6),i()()),o&2){let e=t.$implicit;s(2),p((e==null||e.student==null?null:e.student.mssv)||"N/A"),s(2),p((e==null||e.student==null?null:e.student.name)||"N/A"),s(2),p((e==null?null:e.status)||"N/A")}}function bt(o,t){if(o&1&&(r(0,"div")(1,"h3"),a(2),H(3,"date"),i(),r(4,"table",18)(5,"thead",19)(6,"tr")(7,"th"),a(8,"MSSV"),i(),r(9,"th"),a(10,"T\xEAn"),i(),r(11,"th"),a(12,"Tr\u1EA1ng Th\xE1i"),i()()(),r(13,"tbody"),g(14,_t,7,3,"tr",20),i()()()),o&2){let e=m();s(2),Fe(" \u0110i\u1EC3m Danh L\u1EDBp ",e.selectedMaLop," - H\u1ECDc k\u1EF3 ",e.selectedHocKi," - Ng\xE0y ",W(3,4,e.viewAttendanceDate,"dd/MM/yyyy")," "),s(12),d("ngForOf",e.attendanceList)}}function Mt(o,t){if(o&1&&(r(0,"div"),a(1),H(2,"date"),i()),o&2){let e=m();s(),V(" Kh\xF4ng c\xF3 \u0111i\u1EC3m danh cho l\u1EDBp n\xE0y v\xE0o ng\xE0y ",W(2,1,e.viewAttendanceDate,"dd/MM/yyyy"),`.
`)}}function xt(o,t){o&1&&(r(0,"div"),a(1," Vui l\xF2ng ch\u1ECDn H\u1ECDc k\u1EF3, L\u1EDBp v\xE0 Ng\xE0y \u0111\u1EC3 xem \u0111i\u1EC3m danh. "),i())}var te=class o{constructor(t,e,n,c){this.semesterService=t;this.teacherService=e;this.attendanceService=n;this.studentService=c}selectedHocKi="";selectedMaLop="";viewAttendanceDate="";semesters=[];maLops=[];attendanceList=[];loading=!1;error="";isViewButtonClicked=!1;ngOnInit(){this.loadSemesters()}loadSemesters(){this.semesterService.getAllSemesters().subscribe({next:t=>{this.semesters=t},error:t=>{console.error("L\u1ED7i khi t\u1EA3i h\u1ECDc k\u1EF3",t),this.error="L\u1ED7i khi t\u1EA3i h\u1ECDc k\u1EF3."}})}loadClazzesBySemester(){this.selectedHocKi?(this.loading=!0,this.maLops=[],this.teacherService.getTeacherClassesBySemester(this.selectedHocKi).subscribe({next:t=>{this.maLops=t.map(e=>e.maLop),this.loading=!1},error:t=>{console.error("L\u1ED7i khi t\u1EA3i danh s\xE1ch l\u1EDBp",t),this.error="L\u1ED7i khi t\u1EA3i danh s\xE1ch l\u1EDBp.",this.loading=!1}})):(this.maLops=[],this.attendanceList=[])}viewAttendanceList(){if(this.isViewButtonClicked=!0,this.selectedMaLop&&this.selectedHocKi&&this.viewAttendanceDate){this.loading=!0,this.error="";let t=this.formatDate(this.viewAttendanceDate);this.attendanceService.getAttendanceByClazzAndSemesterAndDate(this.selectedMaLop,this.selectedHocKi,t).subscribe({next:e=>{if(e&&e.length>0){let n=e.map(c=>this.studentService.getStudentByMssv(c.mssv||""));R(n).subscribe({next:c=>{this.attendanceList=e.map((l,f)=>({student:{mssv:l.mssv||"",name:c[f]?.name||"N/A"},status:l.status||"Ch\u01B0a c\xF3"})),this.loading=!1},error:c=>{console.error("L\u1ED7i khi t\u1EA3i th\xF4ng tin sinh vi\xEAn",c),this.attendanceList=e.map(l=>({student:{mssv:l.mssv||"",name:"N/A"},status:l.status||"Ch\u01B0a c\xF3"})),this.loading=!1,this.error="L\u1ED7i khi t\u1EA3i th\xF4ng tin sinh vi\xEAn."}})}else this.attendanceList=[],this.loading=!1},error:e=>{console.error("L\u1ED7i khi t\u1EA3i danh s\xE1ch \u0111i\u1EC3m danh",e),this.error="L\u1ED7i khi t\u1EA3i danh s\xE1ch \u0111i\u1EC3m danh.",this.loading=!1,this.attendanceList=[]}})}else alert("Vui l\xF2ng ch\u1ECDn h\u1ECDc k\u1EF3, l\u1EDBp v\xE0 ng\xE0y xem.")}formatDate(t){let e=new Date(t),n=e.getFullYear(),c=("0"+(e.getMonth()+1)).slice(-2),l=("0"+e.getDate()).slice(-2);return`${n}-${c}-${l}`}static \u0275fac=function(e){return new(e||o)(u(F),u(E),u(Y),u(X))};static \u0275cmp=v({type:o,selectors:[["app-teacher-list"]],decls:17,vars:10,consts:[[1,"mb-3"],["for","hocKi",1,"form-label"],["id","hocKi",1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","mb-3",4,"ngIf"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],["class","alert alert-info",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[4,"ngIf"],[3,"value"],["for","maLop",1,"form-label"],["id","maLop",1,"form-select",3,"ngModelChange","ngModel"],["for","viewAttendanceDate",1,"form-label"],["type","date","id","viewAttendanceDate",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary",3,"click","disabled"],[1,"alert","alert-info"],[1,"alert","alert-danger"],[1,"table","table-bordered","table-striped"],[1,"table-dark"],[4,"ngFor","ngForOf"]],template:function(e,n){e&1&&(r(0,"h2"),a(1,"Xem Danh S\xE1ch \u0110i\u1EC3m Danh"),i(),r(2,"div",0)(3,"label",1),a(4,"Ch\u1ECDn H\u1ECDc K\u1EF3:"),i(),r(5,"select",2),x("ngModelChange",function(l){return M(n.selectedHocKi,l)||(n.selectedHocKi=l),l}),h("change",function(){return n.loadClazzesBySemester()}),r(6,"option",3),a(7,"-- Ch\u1ECDn H\u1ECDc K\u1EF3 --"),i(),g(8,mt,2,2,"option",4),i()(),g(9,gt,7,2,"div",5)(10,ut,4,1,"div",5)(11,ht,2,1,"button",6)(12,ft,2,0,"div",7)(13,Ct,2,1,"div",8)(14,bt,15,7,"div",9)(15,Mt,3,4,"div",9)(16,xt,2,0,"div",9)),e&2&&(s(5),b("ngModel",n.selectedHocKi),s(3),d("ngForOf",n.semesters),s(),d("ngIf",n.selectedHocKi),s(),d("ngIf",n.selectedMaLop&&n.selectedHocKi),s(),d("ngIf",n.selectedMaLop&&n.selectedHocKi&&n.viewAttendanceDate),s(),d("ngIf",n.loading),s(),d("ngIf",n.error),s(),d("ngIf",n.attendanceList&&n.attendanceList.length>0&&!n.loading&&!n.error&&n.selectedMaLop&&n.selectedHocKi&&n.viewAttendanceDate),s(),d("ngIf",n.isViewButtonClicked&&(n.attendanceList==null?null:n.attendanceList.length)===0&&!n.loading&&!n.error&&n.selectedMaLop&&n.selectedHocKi&&n.viewAttendanceDate),s(),d("ngIf",!n.selectedMaLop||!n.selectedHocKi||!n.viewAttendanceDate))},dependencies:[y,T,S,ue,z,L,I,A,q,D,w,k],styles:[".table[_ngcontent-%COMP%]{table-layout:auto;width:100%;border-collapse:collapse;margin-top:30px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px;text-align:left;border:1px solid #ddd;white-space:nowrap;word-wrap:break-word;color:#000;background-color:#32c6dc}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;text-align:left;border:1px solid #ddd;white-space:nowrap}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.title-heading[_ngcontent-%COMP%]{font-size:2.5rem;background:linear-gradient(135deg,#a8d0e6,#b0e0e6);color:#2c3e50;font-weight:700;text-transform:uppercase;border-radius:15px;padding:15px 25px;display:inline-block;box-shadow:0 4px 10px #0000001a;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;letter-spacing:1px;text-align:center;transition:transform .3s ease}.title-heading[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.modal.show[_ngcontent-%COMP%]{display:block;background-color:#00000080;z-index:1050}.modal-dialog[_ngcontent-%COMP%]{width:70%;max-width:1000px;margin:auto;max-height:110vh}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:25px;border-radius:10px;box-shadow:0 4px 15px #0000001a}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px;position:relative}.modal-title[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:700}.modal-header[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:8px;right:10px;font-size:1.5rem;color:#000;background:transparent;border:none;cursor:pointer;padding:0;z-index:10}.modal-body[_ngcontent-%COMP%]{padding:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-label[_ngcontent-%COMP%]{font-weight:700;display:block;margin-bottom:5px}.form-control[_ngcontent-%COMP%]{width:100%;padding:.375rem .75rem;font-size:1rem;line-height:1.5;color:#495057;background-color:#fff;background-clip:padding-box;border:1px solid #ced4da;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.input2-group[_ngcontent-%COMP%]{display:flex;align-items:center}.input2-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{flex-grow:1;margin-right:5px}.btn-sm-search[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:.25rem .5rem;font-size:.875rem;line-height:1.5;border-radius:.2rem;flex-shrink:0}.btn-sm-search[_ngcontent-%COMP%]   i.fa[_ngcontent-%COMP%]{margin-right:5px}.col-md-12.d-flex.justify-content-start.mb-3[_ngcontent-%COMP%]   button.btn[_ngcontent-%COMP%]{display:flex;align-items:center}.col-md-12.d-flex.justify-content-start.mb-3[_ngcontent-%COMP%]   button.btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}.btn-danger.btn-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem;line-height:1.5;border-radius:.2rem}.pagination-controls[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:center}.pagination-controls[_ngcontent-%COMP%]   .ngx-pagination[_ngcontent-%COMP%]{padding-left:0;list-style:none;display:flex;border-radius:.25rem}.pagination-controls[_ngcontent-%COMP%]   .ngx-pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .pagination-controls[_ngcontent-%COMP%]   .ngx-pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:.5rem .75rem;line-height:1.5;border:1px solid #dee2e6;margin-left:-1px;color:#007bff;text-decoration:none;cursor:pointer}.pagination-controls[_ngcontent-%COMP%]   .ngx-pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child   a[_ngcontent-%COMP%], .pagination-controls[_ngcontent-%COMP%]   .ngx-pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child   span[_ngcontent-%COMP%]{border-top-left-radius:.25rem;border-bottom-left-radius:.25rem}.pagination-controls[_ngcontent-%COMP%]   .ngx-pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child   a[_ngcontent-%COMP%], .pagination-controls[_ngcontent-%COMP%]   .ngx-pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child   span[_ngcontent-%COMP%]{border-top-right-radius:.25rem;border-bottom-right-radius:.25rem}.pagination-controls[_ngcontent-%COMP%]   .ngx-pagination[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .pagination-controls[_ngcontent-%COMP%]   .ngx-pagination[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff;color:#fff;cursor:default}.pagination-controls[_ngcontent-%COMP%]   .ngx-pagination[_ngcontent-%COMP%]   li.disabled[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .pagination-controls[_ngcontent-%COMP%]   .ngx-pagination[_ngcontent-%COMP%]   li.disabled[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#6c757d;pointer-events:none;background-color:#fff;border-color:#dee2e6}.btn-info[_ngcontent-%COMP%]{color:#fff;background-color:#17a2b8;border-color:#17a2b8;transition:background-color .15s ease-in-out,border-color .15s ease-in-out}.btn-info[_ngcontent-%COMP%]:hover{background-color:#138496;border-color:#117a8b}"]})};function vt(o,t){if(o&1&&(r(0,"option",10),a(1),i()),o&2){let e=t.$implicit;d("value",e.name),s(),V(" ",e.name," ")}}function Ot(o,t){o&1&&(r(0,"div",11)(1,"p"),a(2,"Kh\xF4ng c\xF3 l\u1EDBp n\xE0o"),i()())}function Pt(o,t){if(o&1&&(r(0,"div",12),a(1),i()),o&2){let e=m();s(),V(" ",e.error," ")}}function St(o,t){if(o&1&&(r(0,"tr")(1,"td"),a(2),i(),r(3,"td"),a(4),i()()),o&2){let e=t.$implicit;s(2),p(e.maHocPhan),s(2),p(e.tenMonHoc)}}function yt(o,t){if(o&1&&(r(0,"div")(1,"table",13)(2,"thead")(3,"tr")(4,"th"),a(5,"M\xE3 h\u1ECDc ph\u1EA7n"),i(),r(6,"th"),a(7,"T\xEAn m\xF4n h\u1ECDc"),i()()(),r(8,"tbody"),g(9,St,5,2,"tr",14),i()()()),o&2){let e=m();s(9),d("ngForOf",e.teacherModules)}}function Et(o,t){o&1&&(r(0,"div")(1,"p"),a(2,"Kh\xF4ng c\xF3 h\u1ECDc ph\u1EA7n n\xE0o trong h\u1ECDc k\u1EF3 n\xE0y."),i()())}var ne=class o{constructor(t,e,n){this.courseService=t;this.semesterService=e;this.teacherService=n}teacherModules=[];selectedSemester="";semesters=[];loading=!1;error="";ngOnInit(){this.loadSemesters()}loadSemesters(){this.loading=!0,this.error="",this.semesterService.getAllSemesters().subscribe({next:t=>{this.semesters=t,this.loading=!1},error:t=>{this.error="L\u1ED7i khi t\u1EA3i danh s\xE1ch h\u1ECDc k\u1EF3: "+t.message,this.loading=!1}})}loadTeacherModules(){if(!this.selectedSemester){this.error="Vui l\xF2ng ch\u1ECDn m\u1ED9t h\u1ECDc k\u1EF3.";return}this.loading=!0,this.error="",this.teacherService.getTeacherModulesBySemester(this.selectedSemester).subscribe({next:t=>{let e=t.map(n=>this.courseService.getCourseByMaHocPhan(n).pipe(me(c=>(console.error(`Error fetching course ${n}:`,c),U({maHocPhan:n,tenMonHoc:"N/A"})))));R(e).subscribe(n=>{this.teacherModules=n,this.loading=!1},n=>{this.error="Failed to load course details: "+n.message,this.loading=!1,this.teacherModules=[]})},error:t=>{this.error="Failed to load teacher modules: "+t.message,this.loading=!1,this.teacherModules=[]}})}static \u0275fac=function(e){return new(e||o)(u(Re),u(F),u(E))};static \u0275cmp=v({type:o,selectors:[["app-course-list"]],decls:15,vars:6,consts:[[1,"container-fluid","mt-4"],[1,"row","mb-3"],[1,"col-md-4"],["for","semesterSelect",1,"form-label"],["id","semesterSelect",1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[4,"ngIf"],[3,"value"],[1,"text-center"],[1,"alert","alert-danger"],[1,"table","table-bordered","table-striped"],[4,"ngFor","ngForOf"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"h2"),a(2,"Danh S\xE1ch L\u1EDBp H\u1ECDc"),i(),r(3,"div",1)(4,"div",2)(5,"label",3),a(6,"Ch\u1ECDn h\u1ECDc k\u1EF3:"),i(),r(7,"select",4),x("ngModelChange",function(l){return M(n.selectedSemester,l)||(n.selectedSemester=l),l}),h("change",function(){return n.loadTeacherModules()}),r(8,"option",5),a(9,"-- Ch\u1ECDn h\u1ECDc k\u1EF3 --"),i(),g(10,vt,2,2,"option",6),i()()(),g(11,Ot,3,0,"div",7)(12,Pt,2,1,"div",8)(13,yt,10,1,"div",9)(14,Et,3,0,"div",9),i()),e&2&&(s(7),b("ngModel",n.selectedSemester),s(3),d("ngForOf",n.semesters),s(),d("ngIf",n.loading),s(),d("ngIf",n.error),s(),d("ngIf",n.teacherModules.length>0&&!n.loading&&!n.error),s(),d("ngIf",n.teacherModules.length===0&&!n.loading&&!n.error&&n.selectedSemester))},dependencies:[y,T,S,z,L,I,A,D,w,k],styles:[`.container-fluid[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}.table-bordered[_ngcontent-%COMP%]{border:1px solid #ddd;border-collapse:collapse;width:100%;margin-bottom:20px}.table-bordered[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > tfoot[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > tfoot[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;line-height:1.42857143;vertical-align:top}.table-bordered[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{background-color:#72d2e1;border-bottom-width:2px}.table[_ngcontent-%COMP%]{width:100%;max-width:100%;margin-bottom:20px}.table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > tfoot[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > tfoot[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{padding:8px;line-height:1.42857143;vertical-align:top;border-top:1px solid #ddd}.table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{vertical-align:bottom;border-bottom:2px solid #ddd}.table[_ngcontent-%COMP%] > caption[_ngcontent-%COMP%] + thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:first-child > th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > colgroup[_ngcontent-%COMP%] + thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:first-child > th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%]:first-child > tr[_ngcontent-%COMP%]:first-child > th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > caption[_ngcontent-%COMP%] + thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:first-child > td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > colgroup[_ngcontent-%COMP%] + thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:first-child > td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%]:first-child > tr[_ngcontent-%COMP%]:first-child > td[_ngcontent-%COMP%]{border-top:0}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] + tbody[_ngcontent-%COMP%]{border-top:2px solid #ddd}.table-condensed[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-condensed[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-condensed[_ngcontent-%COMP%] > tfoot[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-condensed[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .table-condensed[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .table-condensed[_ngcontent-%COMP%] > tfoot[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{padding:5px}.table-bordered[_ngcontent-%COMP%]{border:1px solid #ddd}.table-bordered[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > tfoot[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > tfoot[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{border:1px solid #ddd}.table-bordered[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{border-bottom-width:2px}.table-hover[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.table-striped[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-of-type(odd){background-color:#f9f9f9}.text-center[_ngcontent-%COMP%]{text-align:center}.mt-4[_ngcontent-%COMP%]{margin-top:1.5rem!important}.mb-3[_ngcontent-%COMP%]{margin-bottom:1rem!important}.form-label[_ngcontent-%COMP%]{margin-bottom:.5rem}.form-select[_ngcontent-%COMP%]{display:block;width:100%;padding:.375rem 2.25rem .375rem .75rem;-moz-appearance:none;-webkit-appearance:none;appearance:none;background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'%3e%3c/path%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right .75rem center;background-size:16px 12px;border:1px solid #ced4da;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;font-size:1rem;line-height:1.5}.form-select[_ngcontent-%COMP%]:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem #007bff40}.btn[_ngcontent-%COMP%]{display:inline-block;font-weight:400;color:#212529;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.25rem;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}.btn[_ngcontent-%COMP%]:hover{color:#212529;text-decoration:none}.btn[_ngcontent-%COMP%]:focus, .btn.focus[_ngcontent-%COMP%]{outline:0;box-shadow:0 0 0 .2rem #007bff40}.btn.disabled[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]:disabled{opacity:.65}.btn-primary[_ngcontent-%COMP%]{color:#fff;background-color:#007bff;border-color:#007bff}.btn-primary[_ngcontent-%COMP%]:hover{color:#fff;background-color:#0069d9;border-color:#0062cc}.btn-primary[_ngcontent-%COMP%]:focus, .btn-primary.focus[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem #007bff80}.btn-primary.disabled[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%]:disabled{color:#fff;background-color:#007bff;border-color:#007bff}.btn-success[_ngcontent-%COMP%]{color:#fff;background-color:#28a745;border-color:#28a745}.btn-success[_ngcontent-%COMP%]:hover{color:#fff;background-color:#218838;border-color:#1e7e34}.btn-success[_ngcontent-%COMP%]:focus, .btn-success.focus[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem #28a74580}.btn-success.disabled[_ngcontent-%COMP%], .btn-success[_ngcontent-%COMP%]:disabled{color:#fff;background-color:#28a745;border-color:#28a745}.btn-secondary[_ngcontent-%COMP%]{color:#fff;background-color:#6c757d;border-color:#6c757d}.btn-secondary[_ngcontent-%COMP%]:hover{color:#fff;background-color:#5a6268;border-color:#545b62}.btn-secondary[_ngcontent-%COMP%]:focus, .btn-secondary.focus[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem #6c757d80}.btn-secondary.disabled[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]:disabled{color:#fff;background-color:#6c757d;border-color:#6c757d}.modal[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:1050;display:none;overflow:hidden;-webkit-overflow-scrolling:touch}.modal.show[_ngcontent-%COMP%]{display:block;overflow:auto}.modal.fade[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{-webkit-transform:translate(0,-25%);transform:translateY(-25%);transition:-webkit-transform .3s ease-out;transition:transform .3s ease-out;transition:transform .3s ease-out,-webkit-transform .3s ease-out}.modal.show[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{-webkit-transform:none;transform:none}.modal-dialog[_ngcontent-%COMP%]{position:relative;width:auto;margin:10px}@media (min-width: 576px){.modal-dialog[_ngcontent-%COMP%]{max-width:500px;margin:30px auto}}.modal-content[_ngcontent-%COMP%]{position:relative;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;background-color:#fff;background-clip:padding-box;border:1px solid rgba(0,0,0,.2);border-radius:.3rem;outline:0}.modal-header[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-align:start;align-items:flex-start;-ms-flex-pack:justify;justify-content:space-between;padding:1rem;border-bottom:1px solid #dee2e6;border-top-left-radius:.3rem;border-top-right-radius:.3rem}.modal-title[_ngcontent-%COMP%]{margin-bottom:0;line-height:1.5}.modal-body[_ngcontent-%COMP%]{position:relative;-ms-flex:1 1 auto;flex:1 1 auto;padding:1rem}.modal-footer[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:end;justify-content:flex-end;padding:1rem;border-top:1px solid #dee2e6;border-bottom-right-radius:.3rem;border-bottom-left-radius:.3rem}`]})};var kt=o=>({itemsPerPage:10,currentPage:o});function Lt(o,t){if(o&1&&(r(0,"option",10),a(1),i()),o&2){let e=t.$implicit;d("value",e.name),s(),V(" ",e.name," ")}}function Tt(o,t){o&1&&(r(0,"div",11)(1,"p"),a(2,"\u0110ang t\u1EA3i danh s\xE1ch l\u1EDBp h\u1ECDc..."),i()())}function Dt(o,t){if(o&1&&(r(0,"div",12),a(1),i()),o&2){let e=m();s(),V(" ",e.error," ")}}function It(o,t){if(o&1&&(r(0,"tr")(1,"td"),a(2),i(),r(3,"td"),a(4),i(),r(5,"td"),a(6),i()()),o&2){let e=t.$implicit;s(2),p(e.maLop),s(2),p(e.maHocPhan),s(2),p(e.lichThi)}}function At(o,t){if(o&1){let e=P();r(0,"div")(1,"table",13)(2,"thead")(3,"tr")(4,"th"),a(5,"M\xE3 l\u1EDBp"),i(),r(6,"th"),a(7,"T\xEAn l\u1EDBp"),i(),r(8,"th"),a(9,"L\u1ECBch thi"),i()()(),r(10,"tbody"),g(11,It,7,3,"tr",14),H(12,"paginate"),i()(),r(13,"pagination-controls",15),h("pageChange",function(c){C(e);let l=m();return _(l.p=c)}),i()()}if(o&2){let e=m();s(11),d("ngForOf",W(12,1,e.classes,ce(4,kt,e.p)))}}function zt(o,t){o&1&&(r(0,"div")(1,"p"),a(2,"Kh\xF4ng c\xF3 l\u1EDBp h\u1ECDc n\xE0o trong h\u1ECDc k\u1EF3 n\xE0y."),i()())}var oe=class o{constructor(t,e){this.teacherService=t;this.semesterService=e}classes=[];selectedSemester="";semesters=[];loading=!1;error="";p=1;ngOnInit(){this.loadSemesters()}loadSemesters(){this.loading=!0,this.semesterService.getAllSemesters().subscribe({next:t=>{this.semesters=t,this.loading=!1},error:t=>{this.error="L\u1ED7i khi t\u1EA3i danh s\xE1ch h\u1ECDc k\u1EF3: "+t.message,this.loading=!1}})}loadClasses(){if(!this.selectedSemester){this.error="Vui l\xF2ng ch\u1ECDn m\u1ED9t h\u1ECDc k\u1EF3.",this.classes=[];return}this.loading=!0,this.error="",this.teacherService.getTeacherClassesBySemester(this.selectedSemester).subscribe({next:t=>{this.classes=t,this.loading=!1},error:t=>{this.error="C\xF3 l\u1ED7i x\u1EA3y ra khi t\u1EA3i danh s\xE1ch l\u1EDBp h\u1ECDc: "+t.message,this.loading=!1,this.classes=[]}})}static \u0275fac=function(e){return new(e||o)(u(E),u(F))};static \u0275cmp=v({type:o,selectors:[["app-clazz-list"]],decls:15,vars:6,consts:[[1,"container-fluid","mt-4"],[1,"row","mb-3"],[1,"col-md-4"],["for","semesterSelect",1,"form-label"],["id","semesterSelect",1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[4,"ngIf"],[3,"value"],[1,"text-center"],[1,"alert","alert-danger"],[1,"table","table-bordered","table-striped"],[4,"ngFor","ngForOf"],["previousLabel","\xAB","nextLabel","\xBB",1,"d-flex","justify-content-center","mt-3",3,"pageChange"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"h2"),a(2,"Danh S\xE1ch L\u1EDBp H\u1ECDc"),i(),r(3,"div",1)(4,"div",2)(5,"label",3),a(6,"Ch\u1ECDn h\u1ECDc k\u1EF3:"),i(),r(7,"select",4),x("ngModelChange",function(l){return M(n.selectedSemester,l)||(n.selectedSemester=l),l}),h("change",function(){return n.loadClasses()}),r(8,"option",5),a(9,"-- Ch\u1ECDn h\u1ECDc k\u1EF3 --"),i(),g(10,Lt,2,2,"option",6),i()()(),g(11,Tt,3,0,"div",7)(12,Dt,2,1,"div",8)(13,At,14,6,"div",9)(14,zt,3,0,"div",9),i()),e&2&&(s(7),b("ngModel",n.selectedSemester),s(3),d("ngForOf",n.semesters),s(),d("ngIf",n.loading),s(),d("ngIf",n.error),s(),d("ngIf",n.classes.length>0&&!n.loading&&!n.error),s(),d("ngIf",n.classes.length===0&&!n.loading&&!n.error&&n.selectedSemester))},dependencies:[y,T,S,z,he,fe,L,I,A,D,w,k],styles:[`.container-fluid[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}.table-striped[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-of-type(odd){background-color:#17a2b8}.table-bordered[_ngcontent-%COMP%]{border:1px solid #ddd;border-collapse:collapse;width:100%;margin-bottom:20px}.table-bordered[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > tfoot[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > tfoot[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;line-height:1.42857143;vertical-align:top}.table-bordered[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{background-color:#72d2e1;border-bottom-width:2px}.table[_ngcontent-%COMP%]{width:100%;max-width:100%;margin-bottom:20px}.table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > tfoot[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > tfoot[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{padding:8px;line-height:1.42857143;vertical-align:top;border-top:1px solid #ddd}.table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{vertical-align:bottom;border-bottom:2px solid #ddd}.table[_ngcontent-%COMP%] > caption[_ngcontent-%COMP%] + thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:first-child > th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > colgroup[_ngcontent-%COMP%] + thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:first-child > th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%]:first-child > tr[_ngcontent-%COMP%]:first-child > th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > caption[_ngcontent-%COMP%] + thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:first-child > td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > colgroup[_ngcontent-%COMP%] + thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:first-child > td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%]:first-child > tr[_ngcontent-%COMP%]:first-child > td[_ngcontent-%COMP%]{border-top:0}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] + tbody[_ngcontent-%COMP%]{border-top:2px solid #ddd}.table-condensed[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-condensed[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-condensed[_ngcontent-%COMP%] > tfoot[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-condensed[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .table-condensed[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .table-condensed[_ngcontent-%COMP%] > tfoot[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{padding:5px}.table-bordered[_ngcontent-%COMP%]{border:1px solid #ddd}.table-bordered[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > tfoot[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > tfoot[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{border:1px solid #ddd}.table-bordered[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{border-bottom-width:2px}.table-hover[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.table-striped[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-of-type(odd){background-color:#f9f9f9}.text-center[_ngcontent-%COMP%]{text-align:center}.mt-4[_ngcontent-%COMP%]{margin-top:1.5rem!important}.mb-3[_ngcontent-%COMP%]{margin-bottom:1rem!important}.form-label[_ngcontent-%COMP%]{margin-bottom:.5rem}.form-select[_ngcontent-%COMP%]{display:block;width:100%;padding:.375rem 2.25rem .375rem .75rem;-moz-appearance:none;-webkit-appearance:none;appearance:none;background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'%3e%3c/path%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right .75rem center;background-size:16px 12px;border:1px solid #ced4da;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;font-size:1rem;line-height:1.5}.form-select[_ngcontent-%COMP%]:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem #007bff40}.btn[_ngcontent-%COMP%]{display:inline-block;font-weight:400;color:#212529;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.25rem;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}.btn[_ngcontent-%COMP%]:hover{color:#212529;text-decoration:none}.btn[_ngcontent-%COMP%]:focus, .btn.focus[_ngcontent-%COMP%]{outline:0;box-shadow:0 0 0 .2rem #007bff40}.btn.disabled[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]:disabled{opacity:.65}.btn-primary[_ngcontent-%COMP%]{color:#fff;background-color:#007bff;border-color:#007bff}.btn-primary[_ngcontent-%COMP%]:hover{color:#fff;background-color:#0069d9;border-color:#0062cc}.btn-primary[_ngcontent-%COMP%]:focus, .btn-primary.focus[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem #007bff80}.btn-primary.disabled[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%]:disabled{color:#fff;background-color:#007bff;border-color:#007bff}.btn-success[_ngcontent-%COMP%]{color:#fff;background-color:#28a745;border-color:#28a745}.btn-success[_ngcontent-%COMP%]:hover{color:#fff;background-color:#218838;border-color:#1e7e34}.btn-success[_ngcontent-%COMP%]:focus, .btn-success.focus[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem #28a74580}.btn-success.disabled[_ngcontent-%COMP%], .btn-success[_ngcontent-%COMP%]:disabled{color:#fff;background-color:#28a745;border-color:#28a745}.btn-secondary[_ngcontent-%COMP%]{color:#fff;background-color:#6c757d;border-color:#6c757d}.btn-secondary[_ngcontent-%COMP%]:hover{color:#fff;background-color:#5a6268;border-color:#545b62}.btn-secondary[_ngcontent-%COMP%]:focus, .btn-secondary.focus[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem #6c757d80}.btn-secondary.disabled[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]:disabled{color:#fff;background-color:#6c757d;border-color:#6c757d}.modal[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:1050;display:none;overflow:hidden;-webkit-overflow-scrolling:touch}.modal.show[_ngcontent-%COMP%]{display:block;overflow:auto}.modal.fade[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{-webkit-transform:translate(0,-25%);transform:translateY(-25%);transition:-webkit-transform .3s ease-out;transition:transform .3s ease-out;transition:transform .3s ease-out,-webkit-transform .3s ease-out}.modal.show[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{-webkit-transform:none;transform:none}.modal-dialog[_ngcontent-%COMP%]{position:relative;width:auto;margin:10px}@media (min-width: 576px){.modal-dialog[_ngcontent-%COMP%]{max-width:500px;margin:30px auto}}.modal-content[_ngcontent-%COMP%]{position:relative;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;background-color:#fff;background-clip:padding-box;border:1px solid rgba(0,0,0,.2);border-radius:.3rem;outline:0}.modal-header[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-align:start;align-items:flex-start;-ms-flex-pack:justify;justify-content:space-between;padding:1rem;border-bottom:1px solid #dee2e6;border-top-left-radius:.3rem;border-top-right-radius:.3rem}.modal-title[_ngcontent-%COMP%]{margin-bottom:0;line-height:1.5}.modal-body[_ngcontent-%COMP%]{position:relative;-ms-flex:1 1 auto;flex:1 1 auto;padding:1rem}.modal-footer[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:end;justify-content:flex-end;padding:1rem;border-top:1px solid #dee2e6;border-bottom-right-radius:.3rem;border-bottom-left-radius:.3rem}`]})};var Ue=o=>({show:o});function Ft(o,t){if(o&1&&(r(0,"option",12),a(1),i()),o&2){let e=t.$implicit;d("value",e.name),s(),p(e.name)}}function Nt(o,t){if(o&1&&(r(0,"option",12),a(1),i()),o&2){let e=t.$implicit;d("value",e),s(),p(e)}}function Bt(o,t){if(o&1){let e=P();r(0,"div",0)(1,"label",13),a(2,"Ch\u1ECDn M\xE3 L\u1EDBp:"),i(),r(3,"select",14),x("ngModelChange",function(c){C(e);let l=m();return M(l.selectedMaLop,c)||(l.selectedMaLop=c),_(c)}),h("change",function(){C(e);let c=m();return _(c.loadStudentsByClazz())}),r(4,"option",3),a(5,"-- Ch\u1ECDn M\xE3 L\u1EDBp --"),i(),g(6,Nt,2,2,"option",4),i()()}if(o&2){let e=m();s(3),b("ngModel",e.selectedMaLop),s(3),d("ngForOf",e.maLops)}}function Vt(o,t){o&1&&(r(0,"div",15),a(1,"\u0110ang t\u1EA3i danh s\xE1ch sinh vi\xEAn..."),i())}function Ht(o,t){if(o&1&&(r(0,"div",16),a(1),i()),o&2){let e=m();s(),p(e.error)}}function Wt(o,t){if(o&1){let e=P();r(0,"tr")(1,"td"),a(2),i(),r(3,"td"),a(4),i(),r(5,"td")(6,"input",22),x("ngModelChange",function(c){let l=C(e).$implicit;return M(l.diemGk,c)||(l.diemGk=c),_(c)}),h("input",function(c){C(e);let l=m(2);return _(l.validateGradeInput(c))}),i()(),r(7,"td")(8,"input",22),x("ngModelChange",function(c){let l=C(e).$implicit;return M(l.diemCk,c)||(l.diemCk=c),_(c)}),h("input",function(c){C(e);let l=m(2);return _(l.validateGradeInput(c))}),i()(),r(9,"td")(10,"button",23),h("click",function(){let c=C(e).$implicit,l=m(2);return _(l.showHistory(c.history))}),a(11,"Xem"),i()()()}if(o&2){let e=t.$implicit;s(2),p(e.mssv),s(2),p(e.name),s(2),b("ngModel",e.diemGk),s(2),b("ngModel",e.diemCk)}}function Kt(o,t){if(o&1){let e=P();r(0,"div",17)(1,"h3"),a(2),i(),r(3,"table",18)(4,"thead",19)(5,"tr")(6,"th"),a(7,"MSSV"),i(),r(8,"th"),a(9,"T\xEAn"),i(),r(10,"th"),a(11,"\u0110i\u1EC3m GK"),i(),r(12,"th"),a(13,"\u0110i\u1EC3m CK"),i(),r(14,"th"),a(15,"L\u1ECBch S\u1EED S\u1EEDa \u0110i\u1EC3m"),i()()(),r(16,"tbody"),g(17,Wt,12,4,"tr",20),i()(),r(18,"button",21),h("click",function(){C(e);let c=m();return _(c.saveGrades())}),a(19,"L\u01B0u \u0110i\u1EC3m"),i()()}if(o&2){let e=m();s(2),se("Nh\u1EADp \u0110i\u1EC3m L\u1EDBp ",e.selectedMaLop," - H\u1ECDc k\u1EF3 ",e.selectedHocKi,""),s(15),d("ngForOf",e.students),s(),d("disabled",e.isSaveDisabled())}}function jt(o,t){o&1&&(r(0,"div",24),a(1,` Kh\xF4ng c\xF3 sinh vi\xEAn trong l\u1EDBp n\xE0y \u1EDF h\u1ECDc k\u1EF3 n\xE0y.
`),i())}function Gt(o,t){if(o&1&&(r(0,"tr")(1,"td"),a(2),i(),r(3,"td"),a(4),i()()),o&2){let e=t.$implicit;s(2),p(e.timestamp),s(2),p(e.change)}}function Rt(o,t){o&1&&(r(0,"div"),a(1," Ch\u01B0a c\xF3 l\u1ECBch s\u1EED s\u1EEDa \u0111i\u1EC3m. "),i())}function $t(o,t){if(o&1){let e=P();r(0,"div",25)(1,"div",26)(2,"div",27)(3,"div",28)(4,"h5",29),a(5,"L\u1ECBch S\u1EED S\u1EEDa \u0110i\u1EC3m"),i(),r(6,"button",30),h("click",function(){C(e);let c=m();return _(c.closeHistoryModal())}),i()(),r(7,"div",31)(8,"table",32)(9,"thead")(10,"tr")(11,"th"),a(12,"Th\u1EDDi Gian"),i(),r(13,"th"),a(14,"Thay \u0110\u1ED5i"),i()()(),r(15,"tbody"),g(16,Gt,5,2,"tr",20),i()(),g(17,Rt,2,0,"div",33),i(),r(18,"div",34)(19,"button",35),h("click",function(){C(e);let c=m();return _(c.closeHistoryModal())}),a(20,"\u0110\xF3ng"),i()()()()()}if(o&2){let e=m();d("ngClass",ce(3,Ue,e.isHistoryModalVisible)),s(16),d("ngForOf",e.parsedHistory),s(),d("ngIf",!e.parsedHistory||e.parsedHistory.length===0)}}function Qt(o,t){if(o&1&&G(0,"div",36),o&2){let e=m();d("ngClass",ce(1,Ue,e.isHistoryModalVisible))}}var ie=class o{constructor(t,e,n){this.semesterService=t;this.studentService=e;this.teacherService=n}selectedMaLop="";selectedHocKi="";students=[];loading=!1;error="";maLops=[];semesters=[];isHistoryModalVisible=!1;historyContent="";parsedHistory=[];ngOnInit(){this.loadSemesters()}loadSemesters(){this.semesterService.getAllSemesters().subscribe({next:t=>{this.semesters=t},error:t=>{console.error("L\u1ED7i khi t\u1EA3i h\u1ECDc k\u1EF3",t),this.error="L\u1ED7i khi t\u1EA3i h\u1ECDc k\u1EF3."}})}loadClazzesBySemester(){this.selectedHocKi?(this.loading=!0,this.maLops=[],this.teacherService.getTeacherClassesBySemester(this.selectedHocKi).subscribe({next:t=>{this.maLops=t.map(e=>e.maLop),this.loading=!1},error:t=>{console.error("L\u1ED7i khi t\u1EA3i danh s\xE1ch l\u1EDBp",t),this.error="L\u1ED7i khi t\u1EA3i danh s\xE1ch l\u1EDBp.",this.loading=!1}})):this.maLops=[]}loadStudentsByClazz(){this.selectedMaLop&&this.selectedHocKi?(this.loading=!0,this.students=[],this.studentService.getStudentsByClazzAndSemester(this.selectedMaLop,this.selectedHocKi).subscribe({next:t=>{this.students=t,this.loading=!1},error:t=>{console.error("L\u1ED7i khi t\u1EA3i danh s\xE1ch sinh vi\xEAn v\xE0 \u0111i\u1EC3m",t),this.error="L\u1ED7i khi t\u1EA3i danh s\xE1ch sinh vi\xEAn v\xE0 \u0111i\u1EC3m.",this.loading=!1}})):this.students=[]}saveGrades(){if(this.selectedMaLop&&this.selectedHocKi){this.loading=!0;let t=0,e=this.students.length;this.students.forEach(n=>{let c=typeof n.diemGk=="number"?n.diemGk:-1,l=typeof n.diemCk=="number"?n.diemCk:-1,f={mssv:n.mssv,maLop:this.selectedMaLop,semesterName:this.selectedHocKi,gki:c,cki:l};this.studentService.updateGrade(n.mssv,this.selectedMaLop,this.selectedHocKi,f).subscribe({next:O=>{console.log("\u0110i\u1EC3m \u0111\xE3 l\u01B0u cho sinh vi\xEAn:",n.name,O),t++,t===e&&(this.loading=!1,alert("\u0110\xE3 l\u01B0u \u0111i\u1EC3m th\xE0nh c\xF4ng cho c\xE1c sinh vi\xEAn \u0111\xE3 nh\u1EADp."),this.loadStudentsByClazz())},error:O=>{console.error("L\u1ED7i khi l\u01B0u \u0111i\u1EC3m cho sinh vi\xEAn:",n.name,O),this.error="L\u1ED7i khi l\u01B0u \u0111i\u1EC3m.",this.loading=!1}})})}else alert("Vui l\xF2ng ch\u1ECDn h\u1ECDc k\u1EF3 v\xE0 m\xE3 l\u1EDBp tr\u01B0\u1EDBc khi l\u01B0u \u0111i\u1EC3m.")}validateGradeInput(t){let e=Number(t.target.value);(e<0||e>10)&&(t.target.value="")}isSaveDisabled(){if(!this.students||this.students.length===0)return!0;for(let t of this.students)if(t.diemGk!==void 0&&t.diemGk!==null&&t.diemGk>=0&&t.diemGk<=10||t.diemCk!==void 0&&t.diemCk!==null&&t.diemCk>=0&&t.diemCk<=10)return!1;return!0}showHistory(t){this.historyContent=t||"",this.parsedHistory=this.parseHistoryString(this.historyContent),this.isHistoryModalVisible=!0}closeHistoryModal(){this.isHistoryModalVisible=!1}parseHistoryString(t){if(!t)return[];let e=[],n=t.trim().split(`
`),c=null,l=null;return n.forEach(f=>{let O=f.match(/\[(.*?)\] GK: (.*?) -> (.*?), CK: (.*?) -> (.*?)/);if(O){let B=O[1],ve=O[2].trim(),Oe=O[3].trim(),Pe=O[4].trim(),Se=O[5].trim(),Xe=isNaN(parseFloat(ve))?null:parseFloat(ve),ke=isNaN(parseFloat(Oe))?null:parseFloat(Oe),Ye=isNaN(parseFloat(Pe))?null:parseFloat(Pe),Le=isNaN(parseFloat(Se))?null:parseFloat(Se),de=[];(c===null||Xe!==ke)&&de.push(`GK: ${ve} -> ${Oe}`),(l===null||Ye!==Le)&&de.push(`CK: ${Pe} -> ${Se}`),de.length>0&&e.push({timestamp:B,change:de.join(", ")}),c=ke,l=Le}else{let B=f.match(/\[(.*?)\] (.*)/);B&&e.push({timestamp:B[1],change:B[2].trim()})}}),e}static \u0275fac=function(e){return new(e||o)(u(F),u(X),u(E))};static \u0275cmp=v({type:o,selectors:[["app-semester-list"]],decls:16,vars:9,consts:[[1,"mb-3"],["for","hocKi",1,"form-label"],["id","hocKi",1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","mb-3",4,"ngIf"],["class","alert alert-info",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","alert alert-warning",4,"ngIf"],["class","modal fade","style","display: block;",3,"ngClass",4,"ngIf"],["class","modal-backdrop fade",3,"ngClass",4,"ngIf"],[3,"value"],["for","maLop",1,"form-label"],["id","maLop",1,"form-select",3,"ngModelChange","change","ngModel"],[1,"alert","alert-info"],[1,"alert","alert-danger"],[1,"table-responsive"],[1,"table","table-bordered","table-striped"],[1,"table-dark"],[4,"ngFor","ngForOf"],[1,"btn","btn-success","mt-3",3,"click","disabled"],["type","number",1,"form-control","form-control-sm",3,"ngModelChange","input","ngModel"],[1,"btn","btn-sm","btn-info",3,"click"],[1,"alert","alert-warning"],[1,"modal","fade",2,"display","block",3,"ngClass"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"table","table-bordered"],[4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"modal-backdrop","fade",3,"ngClass"]],template:function(e,n){e&1&&(r(0,"h2"),a(1,"Nh\u1EADp \u0110i\u1EC3m Cho Sinh Vi\xEAn Theo L\u1EDBp"),i(),r(2,"div",0)(3,"label",1),a(4,"Ch\u1ECDn H\u1ECDc K\u1EF3:"),i(),r(5,"select",2),x("ngModelChange",function(l){return M(n.selectedHocKi,l)||(n.selectedHocKi=l),l}),h("change",function(){return n.loadClazzesBySemester()}),r(6,"option",3),a(7,"-- Ch\u1ECDn H\u1ECDc K\u1EF3 --"),i(),g(8,Ft,2,2,"option",4),i()(),g(9,Bt,7,2,"div",5)(10,Vt,2,0,"div",6)(11,Ht,2,1,"div",7)(12,Kt,20,4,"div",8)(13,jt,2,0,"div",9)(14,$t,21,5,"div",10)(15,Qt,1,3,"div",11)),e&2&&(s(5),b("ngModel",n.selectedHocKi),s(3),d("ngForOf",n.semesters),s(),d("ngIf",n.selectedHocKi),s(),d("ngIf",n.loading),s(),d("ngIf",n.error),s(),d("ngIf",n.students&&n.students.length>0&&!n.loading&&!n.error),s(),d("ngIf",n.students&&n.students.length===0&&!n.loading&&!n.error&&n.selectedMaLop&&n.selectedHocKi),s(),d("ngIf",n.isHistoryModalVisible),s(),d("ngIf",n.isHistoryModalVisible))},dependencies:[y,Be,T,S,L,I,A,q,Ge,D,w,k],styles:[".table[_ngcontent-%COMP%]{table-layout:auto;width:100%;border-collapse:collapse;margin-top:30px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px;text-align:left;border:1px solid #ddd;white-space:nowrap;word-wrap:break-word;color:#000;background-color:#32c6dc}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;text-align:left;border:1px solid #ddd;white-space:nowrap;color:#000}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.title-heading[_ngcontent-%COMP%]{font-size:2.5rem;background:linear-gradient(135deg,#a8d0e6,#b0e0e6);color:#2c3e50;font-weight:700;text-transform:uppercase;border-radius:15px;padding:15px 25px;display:inline-block;box-shadow:0 4px 10px #0000001a;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;letter-spacing:1px;text-align:center;transition:transform .3s ease}.title-heading[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{word-wrap:break-word;white-space:nowrap;color:#000}.custom-content-container[_ngcontent-%COMP%]{background-color:#ededea;padding:25px;border-radius:10px;box-shadow:0 0 10px #0000000d}.container[_ngcontent-%COMP%]{padding:20px}.row[_ngcontent-%COMP%]{margin-top:20px}.table[_ngcontent-%COMP%]{margin-top:30px}.container[_ngcontent-%COMP%], .table[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{border-radius:8px}.search-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:15px;margin-top:20px}.search-container[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{width:auto}.search-container[_ngcontent-%COMP%]   .mb-2[_ngcontent-%COMP%]{margin-bottom:0}.search-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.search-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:5px}button[_ngcontent-%COMP%]:hover{opacity:.8;transition:all .3s ease}.btn-info[_ngcontent-%COMP%]{color:#fff;background-color:#17a2b8;border-color:#17a2b8;transition:background-color .15s ease-in-out,border-color .15s ease-in-out}.btn-info[_ngcontent-%COMP%]:hover{background-color:#138496;border-color:#117a8b}"]})};var Ut=(o,t)=>({itemsPerPage:o,currentPage:t});function qt(o,t){if(o&1&&(r(0,"option",9),a(1),i()),o&2){let e=t.$implicit;d("value",e.name),s(),p(e.name)}}function Xt(o,t){o&1&&(r(0,"div",10),a(1,"\u0110ang t\u1EA3i th\u1EDDi kh\xF3a bi\u1EC3u..."),i())}function Yt(o,t){if(o&1&&(r(0,"div",11),a(1),i()),o&2){let e=m();s(),p(e.error)}}function Jt(o,t){if(o&1&&(r(0,"tr")(1,"td"),a(2),i(),r(3,"td"),a(4),i(),r(5,"td"),a(6),i(),r(7,"td"),a(8),i()()),o&2){let e=t.$implicit,n=m(2);s(2),p(n.formatDayOfWeek(e.dayOfWeek)),s(2),p(e.timeSlot),s(2),p(e.clazzName),s(2),p(e.roomName)}}function Zt(o,t){if(o&1){let e=P();r(0,"div",12)(1,"table",13)(2,"thead",14)(3,"tr")(4,"th"),a(5,"Th\u1EE9"),i(),r(6,"th"),a(7,"Ti\u1EBFt"),i(),r(8,"th"),a(9,"M\xE3 L\u1EDBp"),i(),r(10,"th"),a(11,"Ph\xF2ng H\u1ECDc"),i()()(),r(12,"tbody"),g(13,Jt,9,4,"tr",15),H(14,"paginate"),i()(),r(15,"div",16)(16,"pagination-controls",17),h("pageChange",function(c){C(e);let l=m();return _(l.p=c)}),i()()()}if(o&2){let e=m();s(13),d("ngForOf",W(14,1,e.schedule,Ne(4,Ut,e.itemsPerPage,e.p)))}}function en(o,t){o&1&&(r(0,"div",18),a(1,` Kh\xF4ng c\xF3 l\u1ECBch h\u1ECDc cho h\u1ECDc k\u1EF3 n\xE0y.
`),i())}var re=class o{constructor(t,e){this.semesterService=t;this.teacherService=e}selectedSemester="";semesters=[];schedule=[];loading=!1;error="";p=1;itemsPerPage=10;ngOnInit(){this.loadSemesters()}loadSemesters(){this.loading=!0,this.error="",this.semesterService.getAllSemesters().subscribe({next:t=>{this.semesters=t,this.loading=!1},error:t=>{this.error="L\u1ED7i khi t\u1EA3i danh s\xE1ch h\u1ECDc k\u1EF3: "+t.message,this.loading=!1}})}loadSchedule(){if(!this.selectedSemester){this.schedule=[];return}this.loading=!0,this.error="",this.teacherService.getTeacherScheduleBySemester(this.selectedSemester).subscribe({next:t=>{this.schedule=t.sort((e,n)=>{let c=["Th\u1EE9 2","Th\u1EE9 3","Th\u1EE9 4","Th\u1EE9 5","Th\u1EE9 6","Th\u1EE9 7","Ch\u1EE7 Nh\u1EADt"],l=c.indexOf(this.formatDayOfWeek(e.dayOfWeek)),f=c.indexOf(this.formatDayOfWeek(n.dayOfWeek));return l!==f?l-f:0}),this.loading=!1},error:t=>{this.error="L\u1ED7i khi t\u1EA3i th\u1EDDi kh\xF3a bi\u1EC3u: "+t.message,this.schedule=[],this.loading=!1}})}formatDayOfWeek(t){switch(t.toLowerCase()){case"monday":return"Th\u1EE9 2";case"tuesday":return"Th\u1EE9 3";case"wednesday":return"Th\u1EE9 4";case"thursday":return"Th\u1EE9 5";case"friday":return"Th\u1EE9 6";case"saturday":return"Th\u1EE9 7";case"sunday":return"Ch\u1EE7 Nh\u1EADt";default:return t}}static \u0275fac=function(e){return new(e||o)(u(F),u(E))};static \u0275cmp=v({type:o,selectors:[["app-create-clazz"]],decls:13,vars:6,consts:[[1,"mb-3"],["for","semester",1,"form-label"],["id","semester",1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","alert alert-info",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","alert alert-warning",4,"ngIf"],[3,"value"],[1,"alert","alert-info"],[1,"alert","alert-danger"],[1,"table-responsive"],[1,"table","table-bordered","table-striped"],[1,"thead-light"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","mt-3"],["previousLabel","Tr\u01B0\u1EDBc","nextLabel","Sau",3,"pageChange"],[1,"alert","alert-warning"]],template:function(e,n){e&1&&(r(0,"h2"),a(1,"Th\u1EDDi Kh\xF3a Bi\u1EC3u C\u1EE7a Gi\xE1o Vi\xEAn"),i(),r(2,"div",0)(3,"label",1),a(4,"Ch\u1ECDn h\u1ECDc k\u1EF3:"),i(),r(5,"select",2),x("ngModelChange",function(l){return M(n.selectedSemester,l)||(n.selectedSemester=l),l}),h("change",function(){return n.loadSchedule()}),r(6,"option",3),a(7,"-- Ch\u1ECDn h\u1ECDc k\u1EF3 --"),i(),g(8,qt,2,2,"option",4),i()(),g(9,Xt,2,0,"div",5)(10,Yt,2,1,"div",6)(11,Zt,17,7,"div",7)(12,en,2,0,"div",8)),e&2&&(s(5),b("ngModel",n.selectedSemester),s(3),d("ngForOf",n.semesters),s(),d("ngIf",n.loading),s(),d("ngIf",n.error),s(),d("ngIf",n.schedule.length>0&&!n.loading&&!n.error),s(),d("ngIf",n.schedule.length===0&&!n.loading&&!n.error&&n.selectedSemester))},dependencies:[y,T,S,L,I,A,D,w,k,z,he,fe],styles:[".custom-content-container[_ngcontent-%COMP%]{background-color:#17a2b8;padding:25px;border-radius:10px;box-shadow:0 0 10px #0000000d}.container[_ngcontent-%COMP%]{padding:20px}.row[_ngcontent-%COMP%]{margin-top:20px}.container[_ngcontent-%COMP%], .table[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{border-radius:8px}.search-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:15px;margin-top:20px}.search-container[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{width:auto}.search-container[_ngcontent-%COMP%]   .mb-2[_ngcontent-%COMP%]{margin-bottom:0}.search-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.search-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:5px}input[_ngcontent-%COMP%]::placeholder{color:#6c757d;opacity:1;text-align:center}input.form-control[_ngcontent-%COMP%]{border:2px solid #ced4da;border-radius:5px;padding:10px;transition:all .3s ease}input.form-control[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 5px #007bff80;outline:none}input.form-control[_ngcontent-%COMP%]:hover{border-color:#80bdff}label.form-label[_ngcontent-%COMP%]{color:#495057;font-weight:700;transition:color .3s ease}input.form-control[_ngcontent-%COMP%]:focus ~ label.form-label[_ngcontent-%COMP%]{color:#007bff}.row[_ngcontent-%COMP%]   .col-md-3[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.mb-3[_ngcontent-%COMP%]{margin-bottom:1rem}.table[_ngcontent-%COMP%]{table-layout:auto;width:100%;border-collapse:collapse;margin-top:30px;border:1px solid #000}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;text-align:left;border:1px solid #000;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{word-wrap:break-word;white-space:nowrap;background-color:#72d2e1}.title-heading[_ngcontent-%COMP%]{font-size:2.5rem;background:linear-gradient(135deg,#a8d0e6,#b0e0e6);color:#2c3e50;font-weight:700;text-transform:uppercase;border-radius:15px;padding:15px 25px;display:inline-block;box-shadow:0 4px 10px #0000001a;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;letter-spacing:1px;text-align:center;transition:transform .3s ease}.title-heading[_ngcontent-%COMP%]:hover{transform:scale(1.05)}"]})};var ae=class o{static \u0275fac=function(e){return new(e||o)};static \u0275cmp=v({type:o,selectors:[["app-layout-tea"]],standalone:!1,decls:28,vars:0,consts:[[1,"app-layout"],[1,"main-body"],[1,"sidebar"],[1,"menu-list"],["routerLink","/teacher/info",1,"menu-item"],["routerLink","/teacher/clazz",1,"menu-item"],["routerLink","/teacher/course",1,"menu-item"],["routerLink","/teacher/create-clazz",1,"menu-item"],["routerLink","/teacher/semester",1,"menu-item"],["routerLink","/teacher/student",1,"menu-item"],["routerLink","/teacher/taikhoan",1,"menu-item"],[1,"content"]],template:function(e,n){e&1&&(r(0,"div",0),G(1,"app-header"),r(2,"div",1)(3,"div",2)(4,"ul",3)(5,"li")(6,"a",4),a(7,"Th\xF4ng tin c\xE1 nh\xE2n"),i()(),r(8,"li")(9,"a",5),a(10,"Danh s\xE1ch l\u1EDBp d\u1EA1y"),i()(),r(11,"li")(12,"a",6),a(13,"Danh s\xE1ch h\u1ECDc ph\u1EA7n d\u1EA1y"),i()(),r(14,"li")(15,"a",7),a(16,"Th\u1EDDi kho\xE1 bi\u1EC3u"),i()(),r(17,"li")(18,"a",8),a(19,"Nh\u1EADp \u0111i\u1EC3m"),i()(),r(20,"li")(21,"a",9),a(22,"\u0110i\u1EC3m danh"),i()(),r(23,"li")(24,"a",10),a(25,"\u0110\u1ED5i m\u1EADt kh\u1EA9u"),i()()()(),r(26,"div",11),G(27,"router-outlet"),i()()())},dependencies:[We,je,Ce],styles:[".app-layout[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;font-family:Segoe UI,Roboto,Arial,sans-serif}app-header[_ngcontent-%COMP%]{height:60px;background-color:#333;color:#fff;display:flex;align-items:center;padding-left:20px;justify-content:center}.main-body[_ngcontent-%COMP%]{display:flex;flex:1;height:calc(100vh - 60px)}.sidebar[_ngcontent-%COMP%]{background-color:#34495e;color:#ecf0f1;padding:20px;display:flex;flex-direction:column;box-shadow:2px 0 8px #0000001a;width:fit-content;min-width:180px;max-width:250px}.logo[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:20px}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:120px;border-radius:10px}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0;border-bottom:1px solid rgba(255,255,255,.15)}.menu-item[_ngcontent-%COMP%]{color:#ecf0f1;text-decoration:none;font-size:17px;padding:18px 15px;border-radius:8px;display:block;transition:all .3s ease}.menu-item[_ngcontent-%COMP%]:hover{background-color:#1abc9c;color:#fff;transform:scale(1.03);box-shadow:0 4px 8px #00000026}.content[_ngcontent-%COMP%]{flex:1;padding:30px;background-color:#f7f9fa;overflow-y:auto}@media (max-width: 768px){.main-body[_ngcontent-%COMP%]{flex-direction:column}.sidebar[_ngcontent-%COMP%]{width:100%;flex-direction:row;justify-content:space-around;align-items:center;padding:10px}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:5px;border-bottom:none}.content[_ngcontent-%COMP%]{width:100%;padding:15px}}"]})};function nn(o,t){if(o&1&&(r(0,"div")(1,"div",4)(2,"span",5),a(3,"T\xEAn:"),i(),r(4,"span",6),a(5),i()(),r(6,"div",4)(7,"span",5),a(8,"M\xE3 s\u1ED1 gi\xE1o vi\xEAn:"),i(),r(9,"span",6),a(10),i()(),r(11,"div",4)(12,"span",5),a(13,"Ng\xE0y sinh:"),i(),r(14,"span",6),a(15),i()(),r(16,"div",4)(17,"span",5),a(18,"Gi\u1EDBi t\xEDnh:"),i(),r(19,"span",6),a(20),i()(),r(21,"div",4)(22,"span",5),a(23,"Email:"),i(),r(24,"span",6),a(25),i()(),r(26,"div",4)(27,"span",5),a(28,"\u0110i\u1EC7n tho\u1EA1i:"),i(),r(29,"span",6),a(30),i()(),r(31,"div",4)(32,"span",5),a(33,"CCCD:"),i(),r(34,"span",6),a(35),i()(),r(36,"div",4)(37,"span",5),a(38,"Khoa:"),i(),r(39,"span",6),a(40),i()(),r(41,"div",4)(42,"span",5),a(43,"\u0110\u1ECBa ch\u1EC9:"),i(),r(44,"span",6),a(45),i()()()),o&2){let e=m();s(5),p(e.teacherInfo.name),s(5),p(e.teacherInfo.maGv),s(5),p(e.teacherInfo.dateOfBirth),s(5),p(e.teacherInfo.gender),s(5),p(e.teacherInfo.email),s(5),p(e.teacherInfo.phone),s(5),p(e.teacherInfo.cccd),s(5),p(e.teacherInfo.departmentName),s(5),p(e.teacherInfo.address)}}function on(o,t){if(o&1&&(r(0,"div",8)(1,"p"),a(2),i()()),o&2){let e=m(2);s(2),p(e.errorMessage)}}function rn(o,t){o&1&&(r(0,"p",9),a(1,"\u0110ang t\u1EA3i th\xF4ng tin c\xE1 nh\xE2n..."),i())}function an(o,t){if(o&1&&g(0,on,3,1,"div",7)(1,rn,2,0,"ng-template",null,1,we),o&2){let e=m();d("ngIf",e.errorMessage)}}var _e=class o{constructor(t){this.teacherService=t}teacherInfo=null;errorMessage="";ngOnInit(){this.loadTeacherInfo()}loadTeacherInfo(){this.teacherService.getLoggedInTeacherInfo().subscribe({next:t=>{this.teacherInfo=t},error:t=>{this.errorMessage="Kh\xF4ng th\u1EC3 t\u1EA3i th\xF4ng tin sinh vi\xEAn.",console.error("L\u1ED7i t\u1EA3i th\xF4ng tin sinh vi\xEAn",t)}})}static \u0275fac=function(e){return new(e||o)(u(E))};static \u0275cmp=v({type:o,selectors:[["app-info"]],decls:6,vars:2,consts:[["loadingOrError",""],["loading",""],[1,"student-info-container"],[4,"ngIf","ngIfElse"],[1,"info-row"],[1,"info-label"],[1,"info-value"],["class","error",4,"ngIf"],[1,"error"],[1,"loading"]],template:function(e,n){if(e&1&&(r(0,"div",2)(1,"h2"),a(2,"Th\xF4ng Tin C\xE1 nh\xE2n"),i(),g(3,nn,46,9,"div",3)(4,an,3,1,"ng-template",null,0,we),i()),e&2){let c=ze(5);s(3),d("ngIf",n.teacherInfo)("ngIfElse",c)}},dependencies:[S],styles:[".student-info-container[_ngcontent-%COMP%]{padding:20px;border:1px solid #ccc;border-radius:8px;background-color:#f9f9f9;margin-top:20px;width:80%;max-width:600px;margin-left:auto;margin-right:auto}h2[_ngcontent-%COMP%]{color:#333;margin-bottom:20px;text-align:center;width:100%}.info-row[_ngcontent-%COMP%]{display:flex;align-items:baseline;margin-bottom:8px}.info-label[_ngcontent-%COMP%]{font-weight:700;color:#555;width:180px;text-align:left;margin-right:10px;flex-shrink:0}.info-value[_ngcontent-%COMP%]{color:#333;flex-grow:1;text-align:left}.error[_ngcontent-%COMP%]{color:red;font-weight:700;text-align:center;margin-top:20px;width:100%}.loading[_ngcontent-%COMP%]{text-align:center;margin-top:20px;font-style:italic;color:#777;width:100%}"]})};function sn(o,t){if(o&1&&(r(0,"div",11),a(1),i()),o&2){let e=m();s(),p(e.message)}}function cn(o,t){if(o&1&&(r(0,"div",12),a(1),i()),o&2){let e=m();s(),p(e.error)}}var be=class o{constructor(t,e){this.teacherService=t;this.router=e}oldPassword="";newPassword="";confirmNewPassword="";message="";error="";changePassword(){if(this.message="",this.error="",!this.oldPassword||!this.newPassword||!this.confirmNewPassword){this.error="Vui l\xF2ng nh\u1EADp \u0111\u1EA7y \u0111\u1EE7 th\xF4ng tin.";return}if(this.newPassword!==this.confirmNewPassword){this.error="M\u1EADt kh\u1EA9u m\u1EDBi v\xE0 x\xE1c nh\u1EADn m\u1EADt kh\u1EA9u kh\xF4ng kh\u1EDBp.";return}this.teacherService.changePassword(this.oldPassword,this.newPassword).subscribe({next:t=>{this.message=t,this.oldPassword="",this.newPassword="",this.confirmNewPassword=""},error:t=>{this.error=t.error||"\u0110\xE3 x\u1EA3y ra l\u1ED7i khi \u0111\u1ED5i m\u1EADt kh\u1EA9u."}})}logout(){this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||o)(u(E),u(Ke))};static \u0275cmp=v({type:o,selectors:[["app-taikhoan"]],decls:19,vars:5,consts:[[1,"container","mt-5"],["for","oldPassword",1,"form-label"],["type","password","id","oldPassword",1,"form-control",3,"ngModelChange","ngModel"],[1,"mt-3"],["for","newPassword",1,"form-label"],["type","password","id","newPassword",1,"form-control",3,"ngModelChange","ngModel"],["for","confirmNewPassword",1,"form-label"],["type","password","id","confirmNewPassword",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","mt-3",3,"click"],["class","alert alert-success mt-3",4,"ngIf"],["class","alert alert-danger mt-3",4,"ngIf"],[1,"alert","alert-success","mt-3"],[1,"alert","alert-danger","mt-3"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"h2"),a(2,"Th\xF4ng tin t\xE0i kho\u1EA3n"),i(),r(3,"div")(4,"label",1),a(5,"M\u1EADt kh\u1EA9u c\u0169:"),i(),r(6,"input",2),x("ngModelChange",function(l){return M(n.oldPassword,l)||(n.oldPassword=l),l}),i()(),r(7,"div",3)(8,"label",4),a(9,"M\u1EADt kh\u1EA9u m\u1EDBi:"),i(),r(10,"input",5),x("ngModelChange",function(l){return M(n.newPassword,l)||(n.newPassword=l),l}),i()(),r(11,"div",3)(12,"label",6),a(13,"X\xE1c nh\u1EADn m\u1EADt kh\u1EA9u m\u1EDBi:"),i(),r(14,"input",7),x("ngModelChange",function(l){return M(n.confirmNewPassword,l)||(n.confirmNewPassword=l),l}),i()(),r(15,"button",8),h("click",function(){return n.changePassword()}),a(16,"\u0110\u1ED5i m\u1EADt kh\u1EA9u"),i(),g(17,sn,2,1,"div",9)(18,cn,2,1,"div",10),i()),e&2&&(s(6),b("ngModel",n.oldPassword),s(4),b("ngModel",n.newPassword),s(4),b("ngModel",n.confirmNewPassword),s(3),d("ngIf",n.message),s(),d("ngIf",n.error))},dependencies:[y,S,z,L,q,w,k],styles:[".container[_ngcontent-%COMP%]{max-width:600px;margin:30px auto;padding:20px;border:1px solid #ccc;border-radius:8px;background-color:#f9f9f9}h2[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:20px}.form-label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700;color:#555}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:15px;border:1px solid #ddd;border-radius:4px;box-sizing:border-box}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:10px 15px;border:none;border-radius:4px;cursor:pointer;font-size:1em}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.alert[_ngcontent-%COMP%]{padding:10px;margin-top:15px;border-radius:4px}.alert-success[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border:1px solid #c3e6cb}.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.btn-logout[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;padding:8px 12px;border:none;border-radius:4px;cursor:pointer;font-size:.9em;margin-top:20px}.btn-logout[_ngcontent-%COMP%]:hover{background-color:#c82333}"]})};var ln=[{path:"",component:ae,children:[{path:"student",component:J,canActivate:[K]},{path:"teacher",component:te,canActivate:[K]},{path:"course",component:ne,canActivate:[K]},{path:"info",component:_e,canActivate:[K]},{path:"clazz",component:oe,canActivate:[K]},{path:"semester",component:ie,canActivate:[K]},{path:"create-clazz",component:re,canActivate:[K]},{path:"taikhoan",component:be,canActivate:[K]}]}],Me=class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=ge({type:o});static \u0275inj=pe({imports:[$.forChild(ln),$]})};var xe=class o{constructor(){}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=v({type:o,selectors:[["app-teacher"]],decls:2,vars:0,template:function(e,n){e&1&&(r(0,"p"),a(1,"teacher works!"),i())},dependencies:[$],encapsulation:2})};var qe=class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=ge({type:o,bootstrap:[ae]});static \u0275inj=pe({providers:[He()],imports:[y,Me,$,J,te,ne,oe,ie,re,Ce,xe]})};export{qe as TeaModule};
